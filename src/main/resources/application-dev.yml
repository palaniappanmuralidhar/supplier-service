
server:
  port: 8081

spring:
  cloud:
    azure:
      keyvault:
        secret:
          property-source-enabled: true
          property-sources:
            - name: supplier-kv
              endpoint: https://supplier-kv1.vault.azure.net/
              profile:
                tenant-id: f97937bb-6454-450f-9558-d4c6c6a126d6
              credential:
                managed-identity-enabled: true   # âœ… Recommended for AKS Workload Identity
                # OR use client-id/client-secret if not using managed identity

  datasource:
    url: jdbc:postgresql://pg-supplier-learning.postgres.database.azure.com:5432/supplierdb?sslmode=require
    driver-class-name: org.postgresql.Driver
    username: ${db-username}         # <-- Loaded from Key Vault # pgadmin  #
    password: P@ssw0rd123!

  sql:
    init:
      mode: always
      continue-on-error: true

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
  health:
    livenessstate:
      enabled: true
    readinessstate:
      enabled: true
